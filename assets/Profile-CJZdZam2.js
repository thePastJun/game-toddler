import{d as I,A as U,B as D,c as a,o as J,a as O,e as o,b as t,u as R,g as G,r as l,w as i,f as x,t as u,m as k,h as f}from"./index-CeFBid1j.js";import{u as $}from"./game-C5LeyrJx.js";import{u as j,P as V}from"./ProgressBar-TXeMBF19.js";import{u as q}from"./achievement-DHj_Zs6M.js";import{s as F}from"./function-call-DHJhvEF-.js";import{s as H}from"./function-call-CPLKCKjj.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"profile-container"},X={class:"user-info"},Y={class:"avatar"},Z={class:"user-level"},ee={class:"stats-section"},te={class:"stats-grid"},se={class:"stat-item"},oe={class:"stat-value"},ne={class:"stat-item"},ae={class:"stat-value"},le={class:"stat-item"},ie={class:"stat-value"},re={class:"stat-item"},ce={class:"stat-value"},de={class:"progress-section"},ue={class:"settings-section"},ve={class:"actions-section"},me=I({__name:"Profile",setup(_e){const B=G(),d=$(),v=j(),r=q(),n=U({soundEnabled:!0,musicEnabled:!0,hintsEnabled:!0}),P=()=>{const s=localStorage.getItem("gameSettings");if(s){const e=JSON.parse(s);n.soundEnabled=e.soundEnabled??!0,n.musicEnabled=e.musicEnabled??!0,n.hintsEnabled=e.hintsEnabled??!0}},y=()=>{localStorage.setItem("gameSettings",JSON.stringify(n))};D(n,()=>{y()},{deep:!0});const b=a(()=>v.words.length),_=a(()=>v.masteredWords.length),S=a(()=>d.levels.length),p=a(()=>d.levels.filter(s=>s.isCompleted).length),A=a(()=>d.levels.reduce((s,e)=>s+e.stars,0)),C=a(()=>r.achievements.filter(s=>s.unlocked).length),w=a(()=>r.achievements.filter(s=>s.unlocked&&s.isNew).length),L=a(()=>{const s=p.value/S.value,e=_.value/b.value,g=s*.5+e*.5;return Math.max(1,Math.min(10,Math.ceil(g*10)))});J(()=>{d.initLevels(),v.initWords(),r.initAchievements(),r.updateAchievements(),P()});const N=()=>{F({title:"确认重置",message:"这将清除所有游戏进度，包括已完成的关卡和掌握的单词。此操作不可撤销，确定要继续吗？",confirmButtonText:"确认重置",confirmButtonColor:"#ee0a24",cancelButtonText:"取消"}).then(()=>{d.resetProgress(),v.resetProgress(),r.initAchievements(),r.updateAchievements(),H({message:"游戏进度已重置",type:"success",position:"bottom"})}).catch(()=>{})};return(s,e)=>{const g=l("van-nav-bar"),E=l("van-icon"),z=l("van-tag"),M=l("van-badge"),m=l("van-cell"),h=l("van-switch"),T=l("van-cell-group"),W=l("van-button");return f(),O("div",Q,[o(g,{title:"个人中心","left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=c=>R(B).push("/"))}),t("div",X,[t("div",Y,[o(E,{name:"contact",size:"60"})]),e[4]||(e[4]=t("h2",{class:"username"},"小朋友",-1)),t("div",Z,[o(z,{type:"primary",size:"medium"},{default:i(()=>[x("Level "+u(L.value),1)]),_:1})])]),t("div",ee,[e[9]||(e[9]=t("div",{class:"section-title"},"学习统计",-1)),t("div",te,[t("div",se,[t("div",oe,u(_.value),1),e[5]||(e[5]=t("div",{class:"stat-label"},"已掌握单词",-1))]),t("div",ne,[t("div",ae,u(p.value),1),e[6]||(e[6]=t("div",{class:"stat-label"},"已完成关卡",-1))]),t("div",le,[t("div",ie,u(A.value),1),e[7]||(e[7]=t("div",{class:"stat-label"},"获得星星",-1))]),t("div",re,[t("div",ce,u(C.value),1),e[8]||(e[8]=t("div",{class:"stat-label"},"解锁成就",-1))])])]),t("div",de,[e[10]||(e[10]=t("div",{class:"section-title"},"学习进度",-1)),o(V,{"current-value":_.value,"max-value":b.value,label:"单词掌握","show-percentage":""},null,8,["current-value","max-value"]),o(V,{"current-value":p.value,"max-value":S.value,label:"关卡完成","show-percentage":"",color:"#2196f3"},null,8,["current-value","max-value"])]),t("div",ue,[e[11]||(e[11]=t("div",{class:"section-title"},"设置",-1)),o(T,{inset:""},{default:i(()=>[o(m,{title:"我的成就","is-link":"",to:"/achievements",icon:"medal-o"},{"right-icon":i(()=>[w.value>0?(f(),k(M,{key:0,content:w.value},null,8,["content"])):(f(),k(E,{key:1,name:"arrow"}))]),_:1}),o(m,{title:"音效",center:""},{"right-icon":i(()=>[o(h,{modelValue:n.soundEnabled,"onUpdate:modelValue":e[1]||(e[1]=c=>n.soundEnabled=c),size:"24"},null,8,["modelValue"])]),_:1}),o(m,{title:"背景音乐",center:""},{"right-icon":i(()=>[o(h,{modelValue:n.musicEnabled,"onUpdate:modelValue":e[2]||(e[2]=c=>n.musicEnabled=c),size:"24"},null,8,["modelValue"])]),_:1}),o(m,{title:"提示",center:""},{"right-icon":i(()=>[o(h,{modelValue:n.hintsEnabled,"onUpdate:modelValue":e[3]||(e[3]=c=>n.hintsEnabled=c),size:"24"},null,8,["modelValue"])]),_:1})]),_:1})]),t("div",ve,[o(W,{type:"danger",block:"",onClick:N},{default:i(()=>e[12]||(e[12]=[x(" 重置游戏进度 ")])),_:1,__:[12]})])])}}}),Ee=K(me,[["__scopeId","data-v-2feab120"]]);export{Ee as default};
