import{d as N,r as m,c as i,o as n,O as g,J as e,L as y,a as o,N as v,l as V,s as F,k as d,u as I,K as z,w as p,F as w,M as A,b as C}from"./vue.BvTOQNwI.js";import{u as D}from"./achievement.BOIHY3yQ.js";import{P as B}from"./ProgressBar.Smnf-aHg.js";import{_ as M}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./game.CxZyzCUV.js";const E={class:"achievement-icon"},J={class:"achievement-content"},K={class:"achievement-title"},O={class:"achievement-description"},T={key:0,class:"achievement-progress"},U={key:0,class:"achievement-reward"},j=N({__name:"AchievementCard",props:{achievement:{},isNew:{type:Boolean,default:!1}},setup(x){return(t,c)=>{const r=m("van-icon");return n(),i("div",{class:g(["achievement-card",{"achievement-unlocked":t.achievement.unlocked}])},[e("div",E,[o(r,{name:t.achievement.icon,class:g({"bounce-animation":t.achievement.unlocked&&t.isNew})},null,8,["name","class"])]),e("div",J,[e("div",K,v(t.achievement.title),1),e("div",O,v(t.achievement.description),1),t.achievement.progressMax>0?(n(),i("div",T,[o(B,{"current-value":t.achievement.progress,"max-value":t.achievement.progressMax,"show-percentage":""},null,8,["current-value","max-value"])])):y("",!0)]),t.achievement.unlocked?(n(),i("div",U,[o(r,{name:"gift-o",class:"pulse-animation"}),e("span",null,v(t.achievement.reward),1)])):y("",!0)],2)}}}),$=M(j,[["__scopeId","data-v-3de05baf"]]),q={class:"achievements-container"},G={class:"achievements-stats"},H={class:"stat-box"},Q={class:"stat-value"},W={class:"stat-box"},X={class:"stat-value"},Y={class:"stat-box"},Z={class:"stat-value"},ee={class:"progress-section"},te={class:"filter-bar"},se={class:"achievements-list"},ae={key:0,class:"empty-state"},ne={class:"achievements-list"},oe={key:0,class:"empty-state"},ie=N({__name:"Achievements",setup(x){const t=z(),c=D(),r=V(0);F(()=>{c.initAchievements(),c.updateAchievements()});const u=d(()=>c.achievements.length),_=d(()=>c.achievements.filter(l=>l.unlocked)),f=d(()=>c.achievements.filter(l=>!l.unlocked)),h=d(()=>_.value.length),L=d(()=>u.value===0?0:Math.round(h.value/u.value*100)),P=l=>{c.markAchievementAsRead(l)};return(l,s)=>{const R=m("van-nav-bar"),k=m("van-empty"),b=m("van-tab"),S=m("van-tabs");return n(),i("div",q,[o(R,{title:"我的成就","left-text":"返回","left-arrow":"",onClickLeft:s[0]||(s[0]=a=>I(t).push("/profile"))}),e("div",G,[e("div",H,[e("div",Q,v(h.value),1),s[2]||(s[2]=e("div",{class:"stat-label"},"已解锁",-1))]),e("div",W,[e("div",X,v(u.value),1),s[3]||(s[3]=e("div",{class:"stat-label"},"总成就",-1))]),e("div",Y,[e("div",Z,v(L.value)+"%",1),s[4]||(s[4]=e("div",{class:"stat-label"},"完成度",-1))])]),e("div",ee,[o(B,{"current-value":h.value,"max-value":u.value,label:"成就进度","show-percentage":""},null,8,["current-value","max-value"])]),e("div",te,[o(S,{active:r.value,"onUpdate:active":s[1]||(s[1]=a=>r.value=a),animated:"",swipeable:""},{default:p(()=>[o(b,{title:"已解锁"},{default:p(()=>[e("div",se,[_.value.length===0?(n(),i("div",ae,[o(k,{description:"暂无已解锁成就"})])):(n(!0),i(w,{key:1},A(_.value,a=>(n(),C($,{key:a.id,achievement:a,"is-new":a.isNew,onClick:ce=>P(a.id)},null,8,["achievement","is-new","onClick"]))),128))])]),_:1}),o(b,{title:"未解锁"},{default:p(()=>[e("div",ne,[f.value.length===0?(n(),i("div",oe,[o(k,{description:"暂无未解锁成就"})])):(n(!0),i(w,{key:1},A(f.value,a=>(n(),C($,{key:a.id,achievement:a},null,8,["achievement"]))),128))])]),_:1})]),_:1},8,["active"])])])}}}),ue=M(ie,[["__scopeId","data-v-0ffd8e1a"]]);export{ue as default};
