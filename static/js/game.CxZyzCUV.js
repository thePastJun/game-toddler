import{Q as v,l as i}from"./vue.BvTOQNwI.js";const L=v("game",()=>{const n=i(1),t=i([]),a=i(0);return{currentLevel:n,levels:t,highestScore:a,initLevels:()=>{const s=localStorage.getItem("gameLevels");s?t.value=JSON.parse(s):(t.value=Array.from({length:20},(o,e)=>({id:e+1,name:`第${e+1}关`,difficulty:e<5?"easy":e<15?"medium":"hard",wordsRequired:5+Math.floor(e/3)*2,timeLimit:60+e*5,isUnlocked:e===0,isCompleted:!1,stars:0})),localStorage.setItem("gameLevels",JSON.stringify(t.value)));const l=localStorage.getItem("currentLevel");l&&(n.value=parseInt(l));const r=localStorage.getItem("highestScore");r&&(a.value=parseInt(r))},setCurrentLevel:s=>{n.value=s,localStorage.setItem("currentLevel",s.toString())},completeLevel:(s,l,r)=>{const o=t.value.find(e=>e.id===s);if(o){if(o.isCompleted=!0,o.stars=Math.max(o.stars,l),s<t.value.length){const e=t.value.find(c=>c.id===s+1);e&&(e.isUnlocked=!0)}r>a.value&&(a.value=r,localStorage.setItem("highestScore",r.toString())),localStorage.setItem("gameLevels",JSON.stringify(t.value))}},resetProgress:()=>{t.value=t.value.map((s,l)=>({...s,isUnlocked:l===0,isCompleted:!1,stars:0})),n.value=1,a.value=0,localStorage.setItem("gameLevels",JSON.stringify(t.value)),localStorage.setItem("currentLevel","1"),localStorage.setItem("highestScore","0")}}});export{L as u};
